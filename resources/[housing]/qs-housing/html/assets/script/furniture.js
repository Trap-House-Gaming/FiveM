function _0x210f(){const n=["prevYaw","tionSnap","jnCBR","rotation","78057xsKPEq","setTransla","UBktD","ement","itKze","jwYjm","exists","split","rotate","attach","nCePE","IFKAo","jjuZj","cRaYT","TCDLr","aICCl","KMbPx","pwedm","dBrSV","stener","ty-pitch","iVUOn","aterial","set","fFFZD","scale","onILt","style","prevY","RRwel","2|0|3|4|1|","cvApG","distance","ectionMatr","prevX","24lgvwyo","BwZln","oVlbc","4|3|0|2|5|","roll","lper #mode","block","HYLjp","alpha","lper #enti","PUfHq","rer","updateProj","XnNFg","render","lqxdF","XxBxx","YqzaC","mousemove","MXypX","prevPitch","BoxGeometr","ty-z","ItEGY","position","UCADh","RjdFD","VLLEK","bCXjT","pageY","prevZ","edit_entit","cam","ity","WebGLRende","documentEl","cOKSH","DjdPb","ty-roll","FOHzS","MeshPhongM","YgkYR","Mesh","setMode","3|15|11","zshih","pitch","length","xjmCt","toggleCurs","order","QsOxm","4|0|3|6|5|","CANVAS","42496TevhjU","appendChil","JXRWD","422547xhPCFE","XdYDa","tagName","querySelec","88HzHiul","#decorate","IGuIf","2|1","xdRVB","eCamera","gnAZf","sortingMen","pageX","zNvcl","uWraP","wiYXf","keydown","bCeaX","rRPAA","key","nlNJx","YZX","lcjAa","domElement","sZAhS","TxZFj","ty-y","ect","none","load_entit","#object-he","fov","offsetTop","wsJOO","9|6|7|12|2","setRotatio","SkflQ","bYkeg","select_ent","QxhcW","874048eVnXEs","yaw","lYoPD","tPQrK","phbfG","mouseUp","l-name","IieUn","hFOan","GRfdJ","42855vsYXKG","hash","XKIcM","WbjbC","scrollHeig","|14|5|4|8|","scrollWidt","add","DUeen","ground_obj","val","dwioG","innerHeigh","qPgjZ","toggleMous","GvMNp","target","MFFkx","stash","EmFOP","XimWw","xPKrW","setSize","entity","EDhVj","TxbnP","9ywlsda","NOXvW","eMovement","aYLSu","Perspectiv","sort","visible","mouseDown","nSnap","hhogh","prevRoll","ty-x","push","tor","addEventLi","2|4|3|1|0","y_info","3951520GmyUxR","AsrPP","display","1|0|10|13|","change","categories","wmUKG","Scene","ty-yaw","ZGNrc","INhXe","innerWidth","hit","ltEuC","hlLpX","mousedown","LCIJN","object","guogf","519652qyXmfF","translate"];return(_0x210f=function(){return n})()}const _0x19143c=_0x2ee0;!function(){for(var n=_0x2ee0,e=_0x210f();;)try{if(178756==+parseInt(n(257))+-parseInt(n(346))/2+parseInt(n(349))/3+parseInt(n(353))/4*(parseInt(n(189))/5)+-parseInt(n(292))/6*(-parseInt(n(251))/7)+-parseInt(n(389))/8+parseInt(n(215))/9*(-parseInt(n(232))/10))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();import{Post,getOwnedObjects}from"./api.js";import*as _0x23e26e from"three";import{TransformControls}from"three/addons/controls/TransformControls.js";let decorateMenu=null,editable=!1,editingData={};function setDecorateMenu(n){decorateMenu=n}const tracking={x:0,y:0},objectInfos={},furniData={prevY:[],prevX:[],prevZ:[],prevPitch:[],prevRoll:[],prevYaw:[]};let isTransforming=!1,editingId=null;const degToRad=n=>{var e=_0x2ee0,t={wiYXf:function(n,e){return n*e},sZAhS:function(n,e){return n/e}};return t[e(364)](n,t[e(373)](Math.PI,180))},radToDeg=n=>{var e=_0x2ee0,t={gnAZf:function(n,e){return n*e},onILt:function(n,e){return n/e}};return t[e(359)](n,t[e(283)](180,Math.PI))},mouseDownHandler=async n=>{var e=_0x2ee0,t={xPKrW:function(n,e){return n&&e},MXypX:function(n,e){return n!==e},lYoPD:e(345),tPQrK:function(n,e,t){return n(e,t)},qPgjZ:e(387)+e(325),XxBxx:function(n,e){return n!=e},jnCBR:function(n,e){return n==e},KMbPx:function(n){return n()},GvMNp:function(n,e){return n==e},XnNFg:function(n,e){return n<e},TxZFj:function(n,e){return n(e)},lcjAa:e(230),DjdPb:function(n,e){return n==e},LCIJN:function(n){return n()}};if(!(isTransforming=!t[e(210)](isTransforming,!editingId)&&isTransforming)&&!t[e(311)](n[e(205)][e(351)],t[e(391)])){var n=tracking.x,r=tracking.y,a=await t[e(392)](Post,t[e(202)],{x:n,y:r});if(a[e(244)]&&t[e(311)](editingId,a[e(212)]))if(t[e(308)](decorateMenu,null)&&t[e(255)](decorateMenu[e(220)],2)){var o=await t[e(273)](getOwnedObjects);if(!t[e(204)](o[decorateMenu[e(237)][e(360)+"u"][e(207)]][e(249)],a[e(212)])){for(var c=null,i=0;t[e(305)](i,o[e(339)]);i++)if(t[e(204)](o[i][e(249)],a[e(212)])){c=i;break}t[e(308)](c,null)&&(decorateMenu[e(237)][e(360)+"u"][e(207)]=c),decorateMenu[e(237)][e(360)+"u"][e(220)]()}}else t[e(273)](clearData),editingId=a[e(212)],t[e(374)](changeEntity,editingId),isTransforming=!1;else if(!a[e(244)]){var s=t[e(371)][e(264)]("|");let n=0;for(;;){switch(s[n++]){case"0":isTransforming=!1;continue;case"1":transformControls[e(221)]=!1;continue;case"2":if(t[e(308)](decorateMenu,null)&&t[e(329)](decorateMenu[e(220)],2))return;continue;case"3":editingId=null;continue;case"4":t[e(248)](clearData);continue}break}}}},handleTracking=(window[_0x19143c(229)+_0x19143c(276)](_0x19143c(247),mouseDownHandler),n=>{var e=_0x19143c,t={ltEuC:function(n,e){return n-e},JXRWD:function(n,e){return n-e},wsJOO:function(n,e,t){return n(e,t)}},r=t[e(245)](n[e(361)],n[e(205)][e(381)]),n=t[e(348)](n[e(321)],n[e(205)][e(381)]);tracking.x=t[e(382)](normalize,r,document[e(327)+e(260)][e(195)+"h"]),tracking.y=t[e(382)](normalize,n,document[e(327)+e(260)][e(193)+"ht"])}),Scene=new _0x23e26e[_0x19143c(239)],Renderer=new _0x23e26e[_0x19143c(326)+_0x19143c(303)]({alpha:!0}),Camera=(Renderer[_0x19143c(211)](window[_0x19143c(243)],window[_0x19143c(201)+"t"]),document[_0x19143c(352)+_0x19143c(228)](_0x19143c(354))[_0x19143c(347)+"d"](Renderer[_0x19143c(372)]),new _0x23e26e[_0x19143c(219)+_0x19143c(358)](50,window[_0x19143c(243)]/window[_0x19143c(201)+"t"],.1,1e4)),boxGeometry=(Camera[_0x19143c(256)][_0x19143c(342)]=_0x19143c(370),new _0x23e26e[_0x19143c(313)+"y"](1,1,1)),meshPhongMaterial=new _0x23e26e[_0x19143c(332)+_0x19143c(279)]({color:16711935,transparent:!0,opacity:0}),Mesh=new _0x23e26e[_0x19143c(334)](boxGeometry,meshPhongMaterial);Mesh[_0x19143c(256)][_0x19143c(342)]=_0x19143c(370),Mesh[_0x19143c(282)][_0x19143c(280)](1,1,1),Scene[_0x19143c(196)](Mesh),Renderer[_0x19143c(372)][_0x19143c(284)][_0x19143c(234)]=_0x19143c(377);let animationFrameActive=null;function renderGeometry(){var n=_0x19143c;animationFrameActive={hlLpX:function(n,e){return n(e)}}[n(246)](requestAnimationFrame,renderGeometry),Renderer[n(306)](Scene,Camera)}function showGeometry(){var n=_0x19143c,e={RjdFD:n(298)};transformControls[n(221)]=!1,Renderer[n(372)][n(284)][n(234)]=e[n(318)]}function hideGeometry(){var n=_0x19143c,e={AsrPP:n(377)};transformControls[n(221)]=!1,Renderer[n(372)][n(284)][n(234)]=e[n(233)]}function hideTransformControls(){var n=_0x19143c;transformControls[n(221)]=!1}const transformControls=new TransformControls(Camera,Renderer[_0x19143c(372)]),editEntity=(transformControls[_0x19143c(229)+_0x19143c(276)](_0x19143c(236),()=>{var n=_0x19143c,e={jjuZj:function(n,e){return n(e)},aICCl:function(n,e){return n(e)},itKze:function(n,e){return n(e)},xdRVB:function(n){return n()}},t=objectInfos[editingId];Mesh[n(316)].x&&Mesh[n(316)].y&&Mesh[n(316)].z&&t&&(t.x=Mesh[n(316)].x,t.y=-Mesh[n(316)].z,t.z=Mesh[n(316)].y,t[n(338)]=e[n(269)](radToDeg,Mesh[n(256)].x),t[n(296)]=e[n(272)](radToDeg,-Mesh[n(256)].z),t[n(390)]=e[n(261)](radToDeg,Mesh[n(256)].y),e[n(357)](editEntity),Renderer[n(306)](Scene,Camera))}),()=>{var n=_0x19143c,e={nCePE:function(n,e,t){return n(e,t)},bYkeg:n(323)+"y",SkflQ:function(n,e){return n(e)},iVUOn:function(n,e){return n(e)},dwioG:function(n,e){return n(e)},guogf:function(n,e){return n(e)},QxhcW:function(n,e){return n(e)},NOXvW:function(n,e){return n(e)}},t=objectInfos[editingId];e[n(267)](Post,e[n(386)],{id:editingId,alpha:e[n(385)](parseInt,t[n(300)]),x:e[n(278)](parseFloat,t.x),y:e[n(200)](parseFloat,t.y),z:e[n(385)](parseFloat,t.z),pitch:e[n(200)](parseFloat,t[n(338)]),roll:e[n(250)](parseFloat,t[n(296)]),yaw:e[n(388)](parseFloat,t[n(390)])}),e[n(216)](setObjectHelperValues,t)}),storeData=(transformControls[_0x19143c(229)+_0x19143c(276)](_0x19143c(222),()=>{var n=_0x19143c;isTransforming=!0,{xjmCt:function(n){return n()}}[n(340)](storeData)}),transformControls[_0x19143c(229)+_0x19143c(276)](_0x19143c(394),()=>{var n=_0x19143c,e=objectInfos[editingId];e&&(e.x=Mesh[n(316)].x,e.y=-Mesh[n(316)].z,e.z=Mesh[n(316)].y,isTransforming=!1)}),transformControls[_0x19143c(258)+_0x19143c(254)](.1),transformControls[_0x19143c(211)](.8),transformControls[_0x19143c(384)+_0x19143c(223)](degToRad(15)),transformControls[_0x19143c(266)](Mesh),Scene[_0x19143c(196)](transformControls),()=>{var e=_0x19143c,t={WbjbC:function(n,e){return n!==e},nlNJx:function(n,e){return n!==e},IFKAo:e(287)+"5"},r=objectInfos[editingId];if(r&&t[e(192)](r.x,0)&&t[e(369)](r.y,0)&&t[e(369)](r.z,0)){var a=t[e(268)][e(264)]("|");let n=0;for(;;){switch(a[n++]){case"0":furniData[e(285)][e(227)](r.y);continue;case"1":furniData[e(225)][e(227)](r[e(296)]);continue;case"2":furniData[e(291)][e(227)](r.x);continue;case"3":furniData[e(322)][e(227)](r.z);continue;case"4":furniData[e(312)][e(227)](r[e(338)]);continue;case"5":furniData[e(253)][e(227)](r[e(390)]);continue}break}}});function cancelRenderGeometry(){var n=_0x19143c;animationFrameActive&&({uWraP:function(n,e){return n(e)}}[n(363)](cancelAnimationFrame,animationFrameActive),animationFrameActive=null)}function setEditMode(n){var e=_0x19143c,t={cOKSH:function(n,e){return n===e},YgkYR:e(265),phbfG:e(252)};t[e(328)](n,t[e(333)])?transformControls[e(335)](t[e(333)]):transformControls[e(335)](t[e(393)])}function setRotationSnap(n){var e=_0x19143c;transformControls[e(384)+e(223)](n)}function setTranslationSnap(n){var e=_0x19143c;transformControls[e(258)+e(254)](n)}const normalize=(n,e)=>{var t=_0x19143c,r={cvApG:function(n,e){return n+e},HYLjp:function(n,e){return n/e},MFFkx:function(n,e){return n*e},ItEGY:function(n,e){return n-e}};return r[t(288)](r[t(299)](r[t(206)](1,r[t(315)](n,0)),r[t(315)](e,0)),0)};function _0x2ee0(n,e){const t=_0x210f();return(_0x2ee0=function(n,e){return n-=187,t[n]})(n,e)}window[_0x19143c(229)+_0x19143c(276)](_0x19143c(310),handleTracking);const handleUpdatePositions=n=>{var e=_0x19143c,t={EDhVj:function(n,e){return n(e)},ZGNrc:function(n,e){return n(e)},EmFOP:function(n,e,t){return n(e,t)},XKIcM:function(n,e){return n(e)},GRfdJ:function(n,e){return n(e)}},r=(Camera[e(316)][e(280)](n[e(324)][e(316)].x,n[e(324)][e(316)].z,-n[e(324)][e(316)].y),n[e(324)][e(256)].x),a=n[e(324)][e(256)].z,o=n[e(324)][e(256)].y;Camera[e(256)][e(280)](t[e(213)](degToRad,r),t[e(241)](degToRad,t[e(208)](zRotationHandler,r,a)),t[e(241)](degToRad,o)),Camera[e(380)]=n[e(324)][e(380)],Camera[e(304)+e(290)+"ix"](),n[e(212)][e(316)]&&(Mesh[e(316)][e(280)](n[e(212)][e(316)].x,n[e(212)][e(316)].z,-n[e(212)][e(316)].y),Mesh[e(256)][e(280)](t[e(191)](degToRad,n[e(212)][e(256)].x),t[e(241)](degToRad,n[e(212)][e(256)].z),t[e(188)](degToRad,-n[e(212)][e(256)].y)))},changeEntity=async n=>{var e=_0x19143c,t={UCADh:function(n,e,t){return n(e,t)},XdYDa:e(378)+e(231),INhXe:function(n,e){return n(e)},dBrSV:function(n,e){return n(e)}},n=await t[e(317)](Post,t[e(350)],{id:t[e(242)](parseInt,n)});t[e(275)](setEntityData,n)},zRotationHandler=(n,e)=>{var t=_0x19143c,r={YqzaC:function(n,e){return e<n},FOHzS:function(n,e){return n<e},jwYjm:function(n,e){return n<e}};return(!r[t(309)](n,0)||!r[t(331)](n,90))&&(r[t(309)](n,-180)&&r[t(262)](n,-90)||r[t(309)](n,0))?-e:e},setEntityData=n=>{var e=_0x19143c,t={cRaYT:e(235)+e(383)+e(194)+e(336),rRPAA:function(n,e){return n!==e},RRwel:function(n){return n()},aYLSu:function(n,e){return n(e)}},r=t[e(270)][e(264)]("|");let a=0;for(;;){switch(r[a++]){case"0":t[e(367)](editingId,n.id)&&t[e(286)](clearData);continue;case"1":if(n[e(263)])continue;return editable=!1,void(transformControls[e(221)]=!1);case"2":editingData.y=n.y;continue;case"3":editingData[e(289)]=n[e(289)];continue;case"4":editingData[e(296)]=n[e(296)];continue;case"5":editingData[e(338)]=n[e(338)];continue;case"6":editingData[e(190)]=n[e(190)];continue;case"7":editingData[e(300)]=n[e(300)];continue;case"8":editingData[e(390)]=n[e(390)];continue;case"9":objectInfos[editingId]={id:n.id,hash:n[e(190)],alpha:n[e(300)],x:n.x,y:n.y,z:n.z,pitch:n[e(338)],roll:n[e(296)],yaw:n[e(390)],distance:n[e(289)],quaternion:{}};continue;case"10":editable=!0;continue;case"11":t[e(218)](setObjectHelperValues,n);continue;case"12":editingData.x=n.x;continue;case"13":editingId=n.id;continue;case"14":editingData.z=n.z;continue;case"15":transformControls[e(221)]=!0;continue}break}},setObjectHelperValues=n=>{var e=_0x19143c,t={hhogh:e(344)+e(356),lqxdF:function(n,e){return n(e)},BwZln:e(379)+e(301)+e(226),TCDLr:function(n,e){return n(e)},bCeaX:e(379)+e(301)+e(240),PUfHq:e(379)+e(301)+e(330),IGuIf:e(379)+e(301)+e(375),pwedm:function(n,e){return n(e)},zNvcl:e(379)+e(297)+e(395),fFFZD:e(379)+e(301)+e(277),IieUn:function(n,e){return n(e)},oVlbc:e(379)+e(301)+e(314)},r=t[e(224)][e(264)]("|");let a=0;for(;;){switch(r[a++]){case"0":t[e(307)]($,t[e(293)])[e(199)](n.x);continue;case"1":t[e(271)]($,t[e(366)])[e(199)](n[e(390)]);continue;case"2":t[e(271)]($,t[e(302)])[e(199)](n[e(296)]);continue;case"3":t[e(307)]($,t[e(355)])[e(199)](n.y);continue;case"4":t[e(274)]($,t[e(362)])[e(199)](n[e(190)]);continue;case"5":t[e(307)]($,t[e(281)])[e(199)](n[e(338)]);continue;case"6":t[e(396)]($,t[e(294)])[e(199)](n.z);continue}break}},clearData=()=>{var n=_0x19143c,e={hFOan:n(295)+"1"}[n(187)][n(264)]("|");let t=0;for(;;){switch(e[t++]){case"0":furniData[n(322)]=[];continue;case"1":furniData[n(253)]=[];continue;case"2":furniData[n(312)]=[];continue;case"3":furniData[n(291)]=[];continue;case"4":furniData[n(285)]=[];continue;case"5":furniData[n(225)]=[];continue}break}};window[_0x19143c(229)+_0x19143c(276)](_0x19143c(365),async n=>{var e=_0x19143c,t={zshih:function(n,e){return n===e},bCXjT:function(n,e){return n(e)},QsOxm:e(203)+e(217),VLLEK:function(n,e){return n===e},DUeen:function(n,e){return n(e)},wmUKG:e(341)+"or",XimWw:function(n,e,t){return n(e,t)},UBktD:e(198)+e(376),TxbnP:function(n,e){return n(e)}};t[e(337)](n[e(368)],"F6")&&t[e(320)](Post,t[e(343)]),t[e(319)](n[e(368)],"F5")&&t[e(197)](Post,t[e(238)]),(t[e(337)](n[e(368)],"G")||t[e(337)](n[e(368)],"g"))&&(n=await t[e(209)](Post,t[e(259)],{id:t[e(214)](parseInt,editingId)}),t[e(197)](setEntityData,n))});export{setDecorateMenu,renderGeometry,showGeometry,hideGeometry,hideTransformControls,cancelRenderGeometry,setEditMode,setRotationSnap,setTranslationSnap,handleUpdatePositions,changeEntity};